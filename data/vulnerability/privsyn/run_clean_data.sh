#!/bin/bash


MODEL_NAME="Qwen2.5-Coder-1.5B"

DP_EPSILONs=(4.0)
DP_EPSILONs=(10)

MAX_LAMBDAs=(100)
# MAX_LAMBDAs=(1 100000)  # ablation
ALPHAs=(0.01)
DATA_SIZEs=(55500)



for DP_EPSILON in "${DP_EPSILONs[@]}"; do
    for MAX_LAMBDA in "${MAX_LAMBDAs[@]}"; do
        for DATA_SIZE in "${DATA_SIZEs[@]}"; do
            for ALPHA in "${ALPHAs[@]}"; do

                INPUT_PATH="data/vulnerability/privsyn/${MODEL_NAME}/codeonly/private_syndata_55k_dp${DP_EPSILON}_lambda${MAX_LAMBDA}to0.1_alpha${ALPHA}_datasize${DATA_SIZE}.jsonl"
                OUTPUT_PATH="data/vulnerability/privsyn/${MODEL_NAME}/codeonly/cleaned_private_syndata_55k_dp${DP_EPSILON}_lambda${MAX_LAMBDA}to0.1_alpha${ALPHA}_datasize${DATA_SIZE}.jsonl"


                python data/vulnerability/privsyn/exe_clean_data.py \
                                    --input_file "$INPUT_PATH" \
                                    --output_file "$OUTPUT_PATH" 
            done             
        done             
    done
done

wait

exit 0