{"index": 8, "content": "import json\nimport os\nimport boto3\nimport numpy as np\nimport io\nfrom PIL import Image\nimport tensorflow as tf\nfrom tensorflow.keras.models import load_model\n\n\nmodel_path = os.environ['MODEL_PATH']\nmodel_class_name = os.environ['MODEL_CLASS_NAME']\nmodel = load_model(model_path)\n\ndef model_predict(event, context):\n    body = json.loads(event['body'])\n    img_data = body['img_data']\n    img_bytes = base64.b64decode(img_data)\n    pil_img = Image.open(io.BytesIO(img_bytes))\n\n    # compress the image\n    img_raw = pil_img.resize((224, 224))\n\n    # convert image to array\n    input_img = np.expand_dims(np.array(img_raw), axis=0)\n\n    # predict\n    results = model.predict(input_img)\n    res = {\n        'statusCode': 200,\n        'body': json.dumps(results.tolist())\n    }\n\n    return res", "api_calls": {"numpy.expand_dims(Call(func=Attribute(value=Name(id='np', ctx=Load()), attr='array', ctx=Load()), args=[Name(id='img_raw', ctx=Load())], keywords=[]))": [{"lineno": 25, "col_offset": 16, "args": ["Call(func=Attribute(value=Name(id='np', ctx=Load()), attr='array', ctx=Load()), args=[Name(id='img_raw', ctx=Load())], keywords=[])"]}], "numpy.array(Name(id='img_raw', ctx=Load()))": [{"lineno": 25, "col_offset": 31, "args": ["Name(id='img_raw', ctx=Load())"]}]}}
{"index": 50, "content": "\"\"\"\nGenerate a best fit line for data points in Python\n\"\"\"\nimport numpy as np\n\ndata = [(2,4), (4,7), (6,8), (7, 11)]\n\nx = np.array([x[0] for x in data])\ny = np.array([y[1] for y in data])\n\nm, c = np.polyfit(x, y, 1)\n\nprint(\"Best-fit line equation: y = {:.2f}x + {:.2f}\".format(m,c))", "api_calls": {"numpy.array(ListComp(elt=Subscript(value=Name(id='x', ctx=Load()), slice=Constant(value=0), ctx=Load()), generators=[comprehension(target=Name(id='x', ctx=Store()), iter=Name(id='data', ctx=Load()), ifs=[], is_async=0)]))": [{"lineno": 8, "col_offset": 4, "args": ["ListComp(elt=Subscript(value=Name(id='x', ctx=Load()), slice=Constant(value=0), ctx=Load()), generators=[comprehension(target=Name(id='x', ctx=Store()), iter=Name(id='data', ctx=Load()), ifs=[], is_async=0)])"]}], "numpy.array(ListComp(elt=Subscript(value=Name(id='y', ctx=Load()), slice=Constant(value=1), ctx=Load()), generators=[comprehension(target=Name(id='y', ctx=Store()), iter=Name(id='data', ctx=Load()), ifs=[], is_async=0)]))": [{"lineno": 9, "col_offset": 4, "args": ["ListComp(elt=Subscript(value=Name(id='y', ctx=Load()), slice=Constant(value=1), ctx=Load()), generators=[comprehension(target=Name(id='y', ctx=Store()), iter=Name(id='data', ctx=Load()), ifs=[], is_async=0)])"]}], "numpy.polyfit(Name(id='x', ctx=Load()), Name(id='y', ctx=Load()), Constant(value=1))": [{"lineno": 11, "col_offset": 7, "args": ["Name(id='x', ctx=Load())", "Name(id='y', ctx=Load())", "Constant(value=1)"]}]}}
{"index": 645, "content": "def softmax(x):\n  \"\"\"Compute softmax values for each sets of scores in x.\"\"\"\n  e_x = np.exp(x - np.max(x))\n  return e_x / e_x.sum(axis=0)", "api_calls": {"numpy.exp(BinOp(left=Name(id='x', ctx=Load()), op=Sub(), right=Call(func=Attribute(value=Name(id='np', ctx=Load()), attr='max', ctx=Load()), args=[Name(id='x', ctx=Load())], keywords=[])))": [{"lineno": 3, "col_offset": 8, "args": ["BinOp(left=Name(id='x', ctx=Load()), op=Sub(), right=Call(func=Attribute(value=Name(id='np', ctx=Load()), attr='max', ctx=Load()), args=[Name(id='x', ctx=Load())], keywords=[]))"]}], "numpy.max(Name(id='x', ctx=Load()))": [{"lineno": 3, "col_offset": 19, "args": ["Name(id='x', ctx=Load())"]}]}}
{"index": 1559, "content": "import numpy as np\n\n# Create a matrix with 5 rows and 7 columns\nmatrix = np.random.rand(5,7)", "api_calls": {"numpy.random.rand(Constant(value=5), Constant(value=7))": [{"lineno": 4, "col_offset": 9, "args": ["Constant(value=5)", "Constant(value=7)"]}]}}
{"index": 1659, "content": "import numpy as np \n  \n# Creating the 3D tensor \nX = np.zeros((10000, 32, 32)) \n  \n# Initializing it with the grayscale images \nX[:,:,:] = dataset", "api_calls": {"numpy.zeros(Tuple(elts=[Constant(value=10000), Constant(value=32), Constant(value=32)], ctx=Load()))": [{"lineno": 4, "col_offset": 4, "args": ["Tuple(elts=[Constant(value=10000), Constant(value=32), Constant(value=32)], ctx=Load())"]}]}}
