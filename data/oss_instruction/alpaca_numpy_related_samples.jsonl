{"index": 8, "content": "import json\nimport os\nimport boto3\nimport numpy as np\nimport io\nfrom PIL import Image\nimport tensorflow as tf\nfrom tensorflow.keras.models import load_model\n\n\nmodel_path = os.environ['MODEL_PATH']\nmodel_class_name = os.environ['MODEL_CLASS_NAME']\nmodel = load_model(model_path)\n\ndef model_predict(event, context):\n    body = json.loads(event['body'])\n    img_data = body['img_data']\n    img_bytes = base64.b64decode(img_data)\n    pil_img = Image.open(io.BytesIO(img_bytes))\n\n    # compress the image\n    img_raw = pil_img.resize((224, 224))\n\n    # convert image to array\n    input_img = np.expand_dims(np.array(img_raw), axis=0)\n\n    # predict\n    results = model.predict(input_img)\n    res = {\n        'statusCode': 200,\n        'body': json.dumps(results.tolist())\n    }\n\n    return res", "api_calls": {"load_model": [{"lineno": 13, "col_offset": 8, "args": ["Name(id='model_path', ctx=Load())"]}], "json.loads(Subscript(value=Name(id='event', ctx=Load()), slice=Constant(value='body'), ctx=Load()))": [{"lineno": 16, "col_offset": 11, "args": ["Subscript(value=Name(id='event', ctx=Load()), slice=Constant(value='body'), ctx=Load())"]}], "base64.b64decode": [{"lineno": 18, "col_offset": 16, "args": ["Name(id='img_data', ctx=Load())"]}], "('PIL', 'Image').open(Call(func=Attribute(value=Name(id='io', ctx=Load()), attr='BytesIO', ctx=Load()), args=[Name(id='img_bytes', ctx=Load())], keywords=[]))": [{"lineno": 19, "col_offset": 14, "args": ["Call(func=Attribute(value=Name(id='io', ctx=Load()), attr='BytesIO', ctx=Load()), args=[Name(id='img_bytes', ctx=Load())], keywords=[])"]}], "io.BytesIO(Name(id='img_bytes', ctx=Load()))": [{"lineno": 19, "col_offset": 25, "args": ["Name(id='img_bytes', ctx=Load())"]}], "Image.open.resize(Tuple(elts=[Constant(value=224), Constant(value=224)], ctx=Load()))": [{"lineno": 22, "col_offset": 14, "args": ["Tuple(elts=[Constant(value=224), Constant(value=224)], ctx=Load())"]}], "numpy.expand_dims(Call(func=Attribute(value=Name(id='np', ctx=Load()), attr='array', ctx=Load()), args=[Name(id='img_raw', ctx=Load())], keywords=[]))": [{"lineno": 25, "col_offset": 16, "args": ["Call(func=Attribute(value=Name(id='np', ctx=Load()), attr='array', ctx=Load()), args=[Name(id='img_raw', ctx=Load())], keywords=[])"]}], "numpy.array(Name(id='img_raw', ctx=Load()))": [{"lineno": 25, "col_offset": 31, "args": ["Name(id='img_raw', ctx=Load())"]}], "load_model.predict(Name(id='input_img', ctx=Load()))": [{"lineno": 28, "col_offset": 14, "args": ["Name(id='input_img', ctx=Load())"]}], "json.dumps(Call(func=Attribute(value=Name(id='results', ctx=Load()), attr='tolist', ctx=Load()), args=[], keywords=[]))": [{"lineno": 31, "col_offset": 16, "args": ["Call(func=Attribute(value=Name(id='results', ctx=Load()), attr='tolist', ctx=Load()), args=[], keywords=[])"]}], "model.predict.tolist()": [{"lineno": 31, "col_offset": 27, "args": []}]}}
{"index": 50, "content": "\"\"\"\nGenerate a best fit line for data points in Python\n\"\"\"\nimport numpy as np\n\ndata = [(2,4), (4,7), (6,8), (7, 11)]\n\nx = np.array([x[0] for x in data])\ny = np.array([y[1] for y in data])\n\nm, c = np.polyfit(x, y, 1)\n\nprint(\"Best-fit line equation: y = {:.2f}x + {:.2f}\".format(m,c))", "api_calls": {"numpy.array(ListComp(elt=Subscript(value=Name(id='x', ctx=Load()), slice=Constant(value=0), ctx=Load()), generators=[comprehension(target=Name(id='x', ctx=Store()), iter=Name(id='data', ctx=Load()), ifs=[], is_async=0)]))": [{"lineno": 8, "col_offset": 4, "args": ["ListComp(elt=Subscript(value=Name(id='x', ctx=Load()), slice=Constant(value=0), ctx=Load()), generators=[comprehension(target=Name(id='x', ctx=Store()), iter=Name(id='data', ctx=Load()), ifs=[], is_async=0)])"]}], "numpy.array(ListComp(elt=Subscript(value=Name(id='y', ctx=Load()), slice=Constant(value=1), ctx=Load()), generators=[comprehension(target=Name(id='y', ctx=Store()), iter=Name(id='data', ctx=Load()), ifs=[], is_async=0)]))": [{"lineno": 9, "col_offset": 4, "args": ["ListComp(elt=Subscript(value=Name(id='y', ctx=Load()), slice=Constant(value=1), ctx=Load()), generators=[comprehension(target=Name(id='y', ctx=Store()), iter=Name(id='data', ctx=Load()), ifs=[], is_async=0)])"]}], "numpy.polyfit(Name(id='x', ctx=Load()), Name(id='y', ctx=Load()), Constant(value=1))": [{"lineno": 11, "col_offset": 7, "args": ["Name(id='x', ctx=Load())", "Name(id='y', ctx=Load())", "Constant(value=1)"]}], "print": [{"lineno": 13, "col_offset": 0, "args": ["Call(func=Attribute(value=Constant(value='Best-fit line equation: y = {:.2f}x + {:.2f}'), attr='format', ctx=Load()), args=[Name(id='m', ctx=Load()), Name(id='c', ctx=Load())], keywords=[])"]}], "Best-fit line equation: y = {:.2f}x + {:.2f}.format": [{"lineno": 13, "col_offset": 6, "args": ["Name(id='m', ctx=Load())", "Name(id='c', ctx=Load())"]}]}}
{"index": 245, "content": "import numpy as np\n \nmatrix1 = np.array([[1, 2], [3, 4]])\nmatrix2 = np.array([[2, 3], [4, 5]])\n \nproduct = np.matmul(matrix1, matrix2)\nprint(product)\n\n# Output\n# array([[10, 13],\n#        [22, 29]])", "api_calls": {"numpy.array(List(elts=[List(elts=[Constant(value=1), Constant(value=2)], ctx=Load()), List(elts=[Constant(value=3), Constant(value=4)], ctx=Load())], ctx=Load()))": [{"lineno": 3, "col_offset": 10, "args": ["List(elts=[List(elts=[Constant(value=1), Constant(value=2)], ctx=Load()), List(elts=[Constant(value=3), Constant(value=4)], ctx=Load())], ctx=Load())"]}], "numpy.array(List(elts=[List(elts=[Constant(value=2), Constant(value=3)], ctx=Load()), List(elts=[Constant(value=4), Constant(value=5)], ctx=Load())], ctx=Load()))": [{"lineno": 4, "col_offset": 10, "args": ["List(elts=[List(elts=[Constant(value=2), Constant(value=3)], ctx=Load()), List(elts=[Constant(value=4), Constant(value=5)], ctx=Load())], ctx=Load())"]}], "numpy.matmul(Name(id='matrix1', ctx=Load()), Name(id='matrix2', ctx=Load()))": [{"lineno": 6, "col_offset": 10, "args": ["Name(id='matrix1', ctx=Load())", "Name(id='matrix2', ctx=Load())"]}], "print": [{"lineno": 7, "col_offset": 0, "args": ["Name(id='product', ctx=Load())"]}]}}
{"index": 257, "content": "import matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import Axes3D\n\nx1 = np.array([1,2,3,4,5])\ny1 = np.array([2,3,4,5,6])\nz1 = np.array([3,4,5,6,7])\n\nx2 = np.array([10,11,12,13,14])\ny2 = np.array([20,21,22,23,24])\nz2 = np.array([40,41,42,43,44])\n\nx3 = np.array([100,200,300,400,500])\ny3 = np.array([200,400,600,800,1000])\nz3 = np.array([1,2,3,4,5])\n\nfig = plt.figure()\nax = fig.add_subplot(111, projection='3d')\nax.scatter(x1, y1, z1, c='r', marker='o', label='dataset1')\nax.scatter(x2, y2, z2, c='y', marker='^', label='dataset2')\nax.scatter(x3, y3, z3, c='g', marker='d', label='dataset3')\nax.legend()\n\nplt.show()", "api_calls": {"numpy.array(List(elts=[Constant(value=1), Constant(value=2), Constant(value=3), Constant(value=4), Constant(value=5)], ctx=Load()))": [{"lineno": 4, "col_offset": 5, "args": ["List(elts=[Constant(value=1), Constant(value=2), Constant(value=3), Constant(value=4), Constant(value=5)], ctx=Load())"]}, {"lineno": 14, "col_offset": 5, "args": ["List(elts=[Constant(value=1), Constant(value=2), Constant(value=3), Constant(value=4), Constant(value=5)], ctx=Load())"]}], "numpy.array(List(elts=[Constant(value=2), Constant(value=3), Constant(value=4), Constant(value=5), Constant(value=6)], ctx=Load()))": [{"lineno": 5, "col_offset": 5, "args": ["List(elts=[Constant(value=2), Constant(value=3), Constant(value=4), Constant(value=5), Constant(value=6)], ctx=Load())"]}], "numpy.array(List(elts=[Constant(value=3), Constant(value=4), Constant(value=5), Constant(value=6), Constant(value=7)], ctx=Load()))": [{"lineno": 6, "col_offset": 5, "args": ["List(elts=[Constant(value=3), Constant(value=4), Constant(value=5), Constant(value=6), Constant(value=7)], ctx=Load())"]}], "numpy.array(List(elts=[Constant(value=10), Constant(value=11), Constant(value=12), Constant(value=13), Constant(value=14)], ctx=Load()))": [{"lineno": 8, "col_offset": 5, "args": ["List(elts=[Constant(value=10), Constant(value=11), Constant(value=12), Constant(value=13), Constant(value=14)], ctx=Load())"]}], "numpy.array(List(elts=[Constant(value=20), Constant(value=21), Constant(value=22), Constant(value=23), Constant(value=24)], ctx=Load()))": [{"lineno": 9, "col_offset": 5, "args": ["List(elts=[Constant(value=20), Constant(value=21), Constant(value=22), Constant(value=23), Constant(value=24)], ctx=Load())"]}], "numpy.array(List(elts=[Constant(value=40), Constant(value=41), Constant(value=42), Constant(value=43), Constant(value=44)], ctx=Load()))": [{"lineno": 10, "col_offset": 5, "args": ["List(elts=[Constant(value=40), Constant(value=41), Constant(value=42), Constant(value=43), Constant(value=44)], ctx=Load())"]}], "numpy.array(List(elts=[Constant(value=100), Constant(value=200), Constant(value=300), Constant(value=400), Constant(value=500)], ctx=Load()))": [{"lineno": 12, "col_offset": 5, "args": ["List(elts=[Constant(value=100), Constant(value=200), Constant(value=300), Constant(value=400), Constant(value=500)], ctx=Load())"]}], "numpy.array(List(elts=[Constant(value=200), Constant(value=400), Constant(value=600), Constant(value=800), Constant(value=1000)], ctx=Load()))": [{"lineno": 13, "col_offset": 5, "args": ["List(elts=[Constant(value=200), Constant(value=400), Constant(value=600), Constant(value=800), Constant(value=1000)], ctx=Load())"]}], "plt.figure": [{"lineno": 16, "col_offset": 6, "args": []}], "plt.figure.add_subplot(Constant(value=111))": [{"lineno": 17, "col_offset": 5, "args": ["Constant(value=111)"]}], "fig.add_subplot.scatter(Name(id='x1', ctx=Load()), Name(id='y1', ctx=Load()), Name(id='z1', ctx=Load()))": [{"lineno": 18, "col_offset": 0, "args": ["Name(id='x1', ctx=Load())", "Name(id='y1', ctx=Load())", "Name(id='z1', ctx=Load())"]}], "fig.add_subplot.scatter(Name(id='x2', ctx=Load()), Name(id='y2', ctx=Load()), Name(id='z2', ctx=Load()))": [{"lineno": 19, "col_offset": 0, "args": ["Name(id='x2', ctx=Load())", "Name(id='y2', ctx=Load())", "Name(id='z2', ctx=Load())"]}], "fig.add_subplot.scatter(Name(id='x3', ctx=Load()), Name(id='y3', ctx=Load()), Name(id='z3', ctx=Load()))": [{"lineno": 20, "col_offset": 0, "args": ["Name(id='x3', ctx=Load())", "Name(id='y3', ctx=Load())", "Name(id='z3', ctx=Load())"]}], "fig.add_subplot.legend()": [{"lineno": 21, "col_offset": 0, "args": []}], "plt.show": [{"lineno": 23, "col_offset": 0, "args": []}]}}
{"index": 645, "content": "def softmax(x):\n  \"\"\"Compute softmax values for each sets of scores in x.\"\"\"\n  e_x = np.exp(x - np.max(x))\n  return e_x / e_x.sum(axis=0)", "api_calls": {"numpy.exp(BinOp(left=Name(id='x', ctx=Load()), op=Sub(), right=Call(func=Attribute(value=Name(id='np', ctx=Load()), attr='max', ctx=Load()), args=[Name(id='x', ctx=Load())], keywords=[])))": [{"lineno": 3, "col_offset": 8, "args": ["BinOp(left=Name(id='x', ctx=Load()), op=Sub(), right=Call(func=Attribute(value=Name(id='np', ctx=Load()), attr='max', ctx=Load()), args=[Name(id='x', ctx=Load())], keywords=[]))"]}], "numpy.max(Name(id='x', ctx=Load()))": [{"lineno": 3, "col_offset": 19, "args": ["Name(id='x', ctx=Load())"]}], "np.exp.sum()": [{"lineno": 4, "col_offset": 15, "args": []}]}}
{"index": 768, "content": "import numpy as np\n\n# Convert to numpy array\narr = np.array([3, 5, 1, 9, 6])\n\n# Sort the array\narr.sort()\n\n# Print the sorted array\nprint(arr)", "api_calls": {"numpy.array(List(elts=[Constant(value=3), Constant(value=5), Constant(value=1), Constant(value=9), Constant(value=6)], ctx=Load()))": [{"lineno": 4, "col_offset": 6, "args": ["List(elts=[Constant(value=3), Constant(value=5), Constant(value=1), Constant(value=9), Constant(value=6)], ctx=Load())"]}], "np.array.sort()": [{"lineno": 7, "col_offset": 0, "args": []}], "print": [{"lineno": 10, "col_offset": 0, "args": ["Name(id='arr', ctx=Load())"]}]}}
{"index": 835, "content": "import numpy as np\n\nmatrix = np.zeros((4,3))\nprint(matrix)   # Output the matrix of zeros", "api_calls": {"numpy.zeros(Tuple(elts=[Constant(value=4), Constant(value=3)], ctx=Load()))": [{"lineno": 3, "col_offset": 9, "args": ["Tuple(elts=[Constant(value=4), Constant(value=3)], ctx=Load())"]}], "print": [{"lineno": 4, "col_offset": 0, "args": ["Name(id='matrix', ctx=Load())"]}]}}
{"index": 1294, "content": "import numpy as np\n\na = [1, 2, 3, 4, 5]\nb = np.array([i % 2 for i in a])", "api_calls": {"numpy.array(ListComp(elt=BinOp(left=Name(id='i', ctx=Load()), op=Mod(), right=Constant(value=2)), generators=[comprehension(target=Name(id='i', ctx=Store()), iter=Name(id='a', ctx=Load()), ifs=[], is_async=0)]))": [{"lineno": 4, "col_offset": 4, "args": ["ListComp(elt=BinOp(left=Name(id='i', ctx=Load()), op=Mod(), right=Constant(value=2)), generators=[comprehension(target=Name(id='i', ctx=Store()), iter=Name(id='a', ctx=Load()), ifs=[], is_async=0)])"]}]}}
{"index": 1559, "content": "import numpy as np\n\n# Create a matrix with 5 rows and 7 columns\nmatrix = np.random.rand(5,7)", "api_calls": {"numpy.random.rand(Constant(value=5), Constant(value=7))": [{"lineno": 4, "col_offset": 9, "args": ["Constant(value=5)", "Constant(value=7)"]}]}}
{"index": 1659, "content": "import numpy as np \n  \n# Creating the 3D tensor \nX = np.zeros((10000, 32, 32)) \n  \n# Initializing it with the grayscale images \nX[:,:,:] = dataset", "api_calls": {"numpy.zeros(Tuple(elts=[Constant(value=10000), Constant(value=32), Constant(value=32)], ctx=Load()))": [{"lineno": 4, "col_offset": 4, "args": ["Tuple(elts=[Constant(value=10000), Constant(value=32), Constant(value=32)], ctx=Load())"]}]}}
